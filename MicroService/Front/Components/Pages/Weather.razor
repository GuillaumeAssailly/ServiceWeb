@page "/weather"
@attribute [StreamRendering]

<PageTitle>Weather</PageTitle>

<h3>Chronomètre</h3>

<p>@tempsEcoule</p>
<button @onclick="ToggleChronometre">
    @((isRunning ? "Arrêter" : "Démarrer") + " le chronomètre")
</button>

@code {
    private TimeSpan tempsEcoule = TimeSpan.Zero;
    private bool isRunning = false;
    private System.Timers.Timer timer;

    private void ToggleChronometre()
    {
        if (isRunning)
        {
            timer.Stop();
        }
        else
        {
            timer = new System.Timers.Timer(1000);
            timer.Elapsed += Timer_Elapsed;
            timer.Start();
        }

        isRunning = !isRunning;
    }

    private void Timer_Elapsed(object sender, System.Timers.ElapsedEventArgs e)
    {
        tempsEcoule = tempsEcoule.Add(TimeSpan.FromSeconds(1));
        InvokeAsync(StateHasChanged);
    }
}